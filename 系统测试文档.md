# 文档信息

| 项目   | 内容              |
| ---- | --------------- |
| 项目名称 | Yigofang_Mall   |
| 项目类型 | 移动互联网编程实践大作业    |
| 技术框架 | HarmonyOS ArkUI |
| 测试版本 | V1.0            |
| 测试日期 | 2025年12月        |
| 文档版本 | 1.0             |

---

## 1. 测试概述

### 1.1 项目简介

这是一款基于HarmonyOS ArkUI框架开发的移动端电商应用，主要实现商品列表展示、下拉刷新、触底加载更多以及分类标签页切换等核心功能。该应用采用模块化设计，包含主页面、标签页组件、商品列表组件、下拉刷新组件等核心模块，数据管理采用LazyForEach实现懒加载机制，确保应用在处理大量商品数据时能够保持流畅的用户体验。

本测试文档旨在对商城应用进行全面、系统的测试，覆盖功能测试、界面测试、性能测试以及异常场景测试等多个维度，确保应用在各种使用场景下均能稳定运行，满足用户的基本购物浏览需求。测试工作将依据需求分析文档和系统设计文档展开，验证各项功能是否符合预期设计，并发现并修复潜在的问题和缺陷。

### 1.2 测试目标

本次系统测试的主要目标包括以下几个层面：首先，验证商品列表展示功能的正确性，确保LazyForEach懒加载机制能够正常工作，商品数据能够正确渲染且不会出现重复或遗漏的情况；其次，测试下拉刷新功能的可用性，验证用户通过下拉操作能够触发刷新机制，刷新动画和提示信息能够正确显示；第三，检验触底加载功能的有效性，确认用户在滚动到列表底部时能够自动加载更多商品数据，加载过程有明确的视觉反馈；第四，测试分类标签页切换功能的稳定性，验证不同分类之间的切换是否流畅，切换后对应的商品数据是否正确显示；最后，评估应用的整体性能和用户体验，确保应用响应迅速、界面美观、操作便捷。

### 1.3 测试范围

本次测试涵盖以下测试范围：功能测试方面，包括商品列表渲染测试、下拉刷新功能测试、触底加载功能测试、分类标签切换测试、商品数据初始化测试、数据懒加载机制测试以及全局ID生成器测试；界面测试方面，包括主页面布局测试、标签栏样式测试、商品列表项布局测试、下拉刷新指示器测试、字体大小和颜色测试、图标显示测试以及响应式布局测试；性能测试方面，包括列表滚动流畅性测试、内存占用测试、首次加载时间测试、频繁刷新场景测试以及大量数据加载场景测试；异常测试方面，包括空数据场景测试、网络异常模拟测试、频繁操作测试、组件状态异常测试以及内存泄漏测试。

---

## 2. 测试环境

### 2.1 硬件环境

硬件测试环境基于标准的HarmonyOS开发测试设备配置，确保测试结果具有代表性和可重复性。开发测试使用的设备包括华为Mate系列手机、平板设备等支持HarmonyOS系统的终端设备，设备需要具备足够的内存和处理器性能以支持应用开发和运行测试。测试设备的屏幕尺寸涵盖主流手机屏幕尺寸范围，包括6.1英寸至7.2英寸之间的设备，以验证应用在不同屏幕尺寸下的显示效果和布局适配能力。设备分辨率覆盖1080P、2K等主流分辨率级别，确保应用在高清屏幕上能够清晰展示商品图片和文字信息。

### 2.2 软件环境

软件环境方面，测试基于HarmonyOS SDK进行，应用开发使用的编程语言为ArkTS（Ark TypeScript），这是HarmonyOS推荐的应用开发语言，结合ArkUI框架实现声明式UI开发。开发工具采用DevEco Studio，这是华为官方提供的HarmonyOS应用集成开发环境，提供了完整的代码编辑、调试、编译和测试功能。API版本方面，测试基于HarmonyOS的高版本API，确保应用能够使用最新的系统能力和组件特性。测试设备需要安装相应版本的HarmonyOS操作系统，并确保系统的完整性和稳定性。

### 2.3 测试数据准备

测试数据准备是确保测试覆盖率和测试有效性的重要环节。在商品数据方面，测试使用了多组不同分类的商品数据，包括手机分类、服装分类、穿戴分类和家居分类，每个分类包含4至5个初始商品数据项，数据涵盖商品名称、价格、图片、广告语和评价信息等完整字段。图片资源方面，准备了多个商品图片资源文件用于展示不同种类的商品，包括手机图片、服装图片、穿戴设备图片和家居用品图片，图片格式符合HarmonyOS资源管理规范。文字资源方面，测试使用了中英文双语资源文件，涵盖界面标题、标签文字、提示信息等，确保应用支持国际化展示。

---

## 3. 功能测试

### 3.1 商品列表展示功能测试

#### 测试用例编号：FUNC-GL-001

**测试目的**：验证商品列表能够正确展示所有初始商品数据，商品信息完整且格式正确。

**前置条件**：应用正常启动，主页面加载完成，初始数据已成功初始化。

**测试步骤**：首先打开应用，等待主页面加载完成；然后观察商品列表区域的商品展示情况；接着检查每个商品项的信息完整性，包括商品名称、价格、图片、广告语和评价信息；最后验证商品列表的布局是否符合设计要求。

**预期结果**：商品列表应完整展示所有初始加载的商品数据，每个商品项包含正确的商品名称（文字内容正确、换行正常）、商品价格（格式正确、颜色突出）、商品图片（显示正常、无变形）、广告语（文字清晰、显示完整）以及评价信息（内容正确、易于阅读）。列表布局应整齐美观，商品图片和信息区域按设计要求排列。

#### 测试用例编号：FUNC-GL-002

**测试目的**：验证LazyForEach懒加载机制能够正常工作，商品数据按需加载。

**前置条件**：应用正常运行，商品数据源正确初始化，MAX_DATA_LENGTH设置为12。

**测试步骤**：首先启动应用，观察初始加载的商品数量；然后滚动商品列表，查看滚动过程中的商品加载情况；接着继续滚动至列表底部，触发触底加载更多功能；最后观察新商品数据的加载过程。

**预期结果**：应用启动时仅加载初始数量的商品数据，而非一次性加载所有数据；滚动过程中新商品项按需生成和渲染；触底加载时新数据能够正确添加到列表中；整个过程中列表滚动流畅，无明显卡顿。

### 3.2 下拉刷新功能测试

#### 测试用例编号：FUNC-PD-001

**测试目的**：验证用户可以通过下拉操作触发刷新功能，刷新动画和提示信息正确显示。

**前置条件**：应用正常运行，商品列表已加载数据。

**测试步骤**：首先在商品列表区域按住屏幕不动；然后向下拖动一定距离（超过MAX_OFFSET_Y阈值）；接着观察下拉过程中界面的变化，包括下拉偏移量变化和刷新指示器显示；最后释放手指，观察刷新动画和状态变化。

**预期结果**：向下拖动时商品列表随之下移，下拉偏移量随拖动距离增加；当拖动距离超过阈值时，刷新指示器出现在列表顶部，显示刷新图标和提示文字；释放手指后触发刷新动画，1.5秒（REFRESH_TIME）后刷新完成，刷新指示器消失，列表恢复正常显示。

#### 测试用例编号：FUNC-PD-002

**测试目的**：验证未达到阈值时不会触发刷新操作，界面能够正常回弹。

**前置条件**：应用正常运行，商品列表已加载数据。

**测试步骤**：首先在商品列表区域按住屏幕不动；然后向下轻微拖动（未超过MAX_OFFSET_Y阈值）；接着观察界面变化；最后释放手指。

**预期结果**：向下拖动时列表跟随移动，但下拉偏移量有限制；当释放手指时，列表自动回弹至初始位置，不会触发刷新操作；无刷新指示器出现。

#### 测试用例编号：FUNC-PD-003

**测试目的**：验证刷新完成后数据会重新随机排序展示。

**前置条件**：应用正常运行，已触发过刷新操作。

**测试步骤**：首先观察当前商品列表的商品排列顺序；然后触发下拉刷新操作；刷新完成后观察商品排列顺序；最后对比刷新前后的商品顺序。

**预期结果**：刷新完成后，商品列表会使用shuffleArray函数对数据进行随机打乱，商品排列顺序与刷新前不同。

### 3.3 触底加载功能测试

#### 测试用例编号：FUNC-BL-001

**测试目的**：验证用户滚动至列表底部时能够自动加载更多商品数据。

**前置条件**：应用正常运行，初始商品数据已加载完成。

**测试步骤**：首先将商品列表滚动至底部位置；然后观察是否触发加载更多操作；接着等待新数据加载完成；最后检查新加载的商品是否正确显示。

**预期结果**：滚动至底部时触发加载更多操作，加载过程中显示"正在加载更多..."提示；约500毫秒（setTimeout延迟）后新数据添加到列表中；新加载的商品正确显示在列表末尾；加载完成后提示文字变为"已经到底啦"。

#### 测试用例编号：FUNC-BL-002

**测试目的**：验证加载过程中不会重复触发加载操作。

**前置条件**：应用正常运行，列表已滚动至底部，正在加载更多数据。

**测试步骤**：首先将列表滚动至底部触发加载；然后在加载过程中继续尝试滚动；接着观察是否出现重复加载或异常情况；最后等待加载完成。

**预期结果**：加载过程中isLoading标志位为true，有效防止重复触发加载操作；列表不会重复添加相同数据；加载过程完成后应用恢复正常状态。

#### 测试用例编号：FUNC-BL-003

**测试目的**：验证达到数据最大长度后停止加载更多数据。

**前置条件**：应用正常运行，多次触发触底加载。

**测试步骤**：首先连续触发触底加载操作；然后观察数据加载情况；接着当数据量达到MAX_DATA_LENGTH（12）时继续触发加载；最后观察应用行为。

**预期结果**：当数据量达到最大值后，触底加载不再触发新数据的加载；列表保持最大数据量不变；应用无异常行为。

### 3.4 分类标签页切换功能测试

#### 测试用例编号：FUNC-TB-001

**测试目的**：验证用户可以切换不同分类标签页，各分类显示对应商品。

**前置条件**：应用正常运行，主页面加载完成。

**测试步骤**：首先在主页面查看当前显示的商品分类；然后点击"推荐"标签，查看对应商品；接着点击"手机"标签，查看手机分类商品；然后依次切换至"服装"、"穿戴"、"家居"标签；最后检查各分类显示的商品是否正确。

**预期结果**：点击不同标签页时，页面内容正确切换至对应分类；各分类显示的初始商品符合InitialData.ets中定义的对应分类数据；标签切换过程流畅，无明显卡顿或延迟。

#### 测试用例编号：FUNC-TB-002

**测试目的**：验证选中标签的样式与非选中标签有明显区别。

**前置条件**：应用正常运行，标签栏正常显示。

**测试步骤**：首先观察各标签的初始状态；然后依次点击各标签使其成为当前选中项；接着观察选中状态和非选中状态的样式差异；最后检查标签栏的字体大小和颜色变化。

**预期结果**：当前选中标签的字体大小为BIGGER_FONT_SIZE（20），非选中标签为NORMAL_FONT_SIZE（16）；选中标签字体颜色为黑色，非选中标签为灰色；标签切换时有明显的视觉反馈。

#### 测试用例编号：FUNC-TB-003

**测试目的**：验证各分类支持独立的刷新和加载更多操作。

**前置条件**：应用正常运行，已切换至某个分类。

**测试步骤**：首先在当前分类触发下拉刷新；刷新完成后观察商品顺序变化；然后滚动至底部触发加载更多；加载完成后切换至其他分类；最后在新分类重复刷新和加载操作。

**预期结果**：每个分类的刷新和加载操作独立进行，互不影响；各分类维护独立的dataArray数据源；切换分类后回到原分类时数据状态保持不变。

---

## 4. 界面测试

### 4.1 主页面布局测试

#### 测试用例编号：UI-MP-001

**测试目的**：验证主页面整体布局符合设计要求，各组件位置正确。

**前置条件**：应用正常启动并显示主页面。

**测试步骤**：首先观察主页面整体布局结构；然后检查Navigation组件的标题显示；接着检查标签栏的位置和高度；最后检查内容区域的大小和位置。

**预期结果**：主页面使用Row作为根布局容器，高度占满全屏；Navigation组件位于页面顶部，显示"衣哥纺商城"标题；标签栏位于Navigation下方，高度为60；内容区域占满剩余空间；背景色符合设计要求（primaryBgColor）。

#### 测试用例编号：UI-MP-002

**测试目的**：验证页面顶部内边距正确处理状态栏区域。

**前置条件**：应用正常运行，在不同状态栏高度的设备上测试。

**测试步骤**：首先在不同设备上启动应用；然后观察页面顶部与状态栏的间距；接着检查状态栏内容是否被正确覆盖或避让；最后验证内边距值从AppStorage获取。

**预期结果**：页面顶部有正确的内边距值（从AppStorage获取statusBarHeight），确保状态栏区域被正确处理；状态栏内容清晰可见，不被应用界面遮挡。

### 4.2 商品列表项布局测试

#### 测试用例编号：UI-GL-001

**测试目的**：验证商品列表项内部布局正确，图片和信息区域分布合理。

**前置条件**：应用正常运行，商品列表已加载数据。

**测试步骤**：首先查看单个商品列表项的布局结构；然后检查商品图片区域的大小和位置；接着检查商品信息区域的宽度和内容排列；最后检查价格信息的颜色和样式。

**预期结果**：商品列表项使用Row作为根布局；左侧为商品图片区域，宽度为40%，高度100%；右侧为商品信息区域，宽度为60%，高度100%；商品名称显示在信息区域顶部，最多显示2行；广告语显示在名称下方，最多显示1行；评价和价格信息显示在底部一行；价格使用红色字体显示（freshRed）。

#### 测试用例编号：UI-GL-002

**测试目的**：验证商品图片的显示效果，图片无变形且圆角正确。

**前置条件**：应用正常运行，商品图片资源已加载。

**测试步骤**：首先查看商品列表中的图片显示；然后检查图片的objectFit设置；接着检查图片的圆角效果；最后检查不同尺寸商品图片的显示一致性。

**预期结果**：商品图片使用objectFit(ImageFit.Contain)保持比例不变形；图片带有8像素的圆角边框；图片在指定区域内完整显示，不被裁剪或拉伸变形。

### 4.3 下拉刷新指示器测试

#### 测试用例编号：UI-PR-001

**测试目的**：验证下拉刷新指示器的显示效果和位置正确。

**前置条件**：应用正常运行，触发下拉操作。

**测试步骤**：首先向下拖动商品列表；然后观察刷新指示器的出现时机和位置；接着检查指示器内部元素的布局；最后释放手指观察指示器的消失过程。

**预期结果**：刷新指示器在触发刷新状态时出现在列表顶部；使用Column作为根布局，包含刷新图标和提示文字；图标和文字水平排列，图标在左、文字在右，间距20像素；指示器高度60像素，背景色为白色。

---

## 5. 性能测试

### 5.1 滚动流畅性测试

#### 测试用例编号：PERF-SC-001

**测试目的**：验证商品列表滚动过程流畅，无卡顿或掉帧现象。

**前置条件**：应用正常运行，已加载一定数量的商品数据。

**测试步骤**：首先在商品列表区域进行快速连续滚动操作；然后观察滚动过程中的帧率表现；接着检查是否存在明显的卡顿或停顿；最后在不同数据量下测试滚动流畅性。

**预期结果**：列表滚动过程流畅，60帧率稳定；无明显卡顿、跳跃或掉帧现象；滚动停止后列表立即停止，无惯性滑行异常。

### 5.2 内存占用测试

#### 测试用例编号：PERF-ME-001

**测试目的**：验证应用内存占用在合理范围内，无内存泄漏。

**前置条件**：应用刚启动完成。

**测试步骤**：首先记录应用启动后的初始内存占用；然后进行多次刷新和加载操作；接着切换不同分类标签页；最后检查内存占用变化趋势。

**预期结果**：应用初始内存占用在合理范围内；多次操作后内存占用保持稳定，无持续增长趋势；组件销毁时正确清理定时器等资源（aboutToDisappear中clearTimeout）。

### 5.3 首次加载时间测试

#### 测试用例编号：PERF-FL-001

**测试目的**：验证应用首次加载时间在可接受范围内。

**前置条件**：应用未启动，冷启动测试。

**测试步骤**：首先关闭应用，清理后台；然后启动应用并计时；接着记录从点击图标到主页面完全加载的时间；最后重复测试多次取平均值。

**预期结果**：应用首次加载时间应在合理范围内（通常不超过3秒）；加载过程中用户能够看到启动界面或加载提示；主页面加载完成后所有组件和数据正确显示。

---

## 6. 测试用例汇总

### 6.1 功能测试用例汇总

| 用例编号        | 测试项     | 测试目的                 | 优先级 |
| ----------- | ------- | -------------------- | --- |
| FUNC-GL-001 | 商品列表展示  | 验证商品列表正确展示所有初始商品     | 高   |
| FUNC-GL-002 | 懒加载机制   | 验证LazyForEach懒加载正常工作 | 高   |
| FUNC-GL-003 | 商品ID唯一性 | 验证商品数据具有全局唯一ID       | 中   |
| FUNC-PD-001 | 下拉刷新    | 验证下拉刷新功能正确触发         | 高   |
| FUNC-PD-002 | 回弹效果    | 验证未达阈值时的回弹行为         | 中   |
| FUNC-PD-003 | 刷新排序    | 验证刷新后数据随机排序          | 中   |
| FUNC-BL-001 | 触底加载    | 验证触底自动加载更多数据         | 高   |
| FUNC-BL-002 | 加载保护    | 验证加载过程防重复触发          | 中   |
| FUNC-BL-003 | 最大数据量   | 验证达到最大数据量后停止加载       | 中   |
| FUNC-TB-001 | 标签切换    | 验证分类标签页切换功能          | 高   |
| FUNC-TB-002 | 标签样式    | 验证选中标签样式变化           | 中   |
| FUNC-TB-003 | 独立操作    | 验证各分类独立刷新和加载         | 中   |

### 6.2 界面测试用例汇总

| 用例编号      | 测试项   | 测试目的           | 优先级 |
| --------- | ----- | -------------- | --- |
| UI-MP-001 | 主页面布局 | 验证主页面整体布局正确    | 高   |
| UI-MP-002 | 状态栏处理 | 验证顶部内边距正确处理状态栏 | 中   |
| UI-GL-001 | 列表项布局 | 验证商品列表项内部布局正确  | 高   |
| UI-GL-002 | 图片显示  | 验证商品图片显示效果     | 中   |
| UI-PR-001 | 刷新指示器 | 验证下拉刷新指示器显示效果  | 中   |

### 6.3 性能测试用例汇总

| 用例编号        | 测试项   | 测试目的        | 优先级 |
| ----------- | ----- | ----------- | --- |
| PERF-SC-001 | 滚动流畅性 | 验证列表滚动流畅无卡顿 | 高   |
| PERF-ME-001 | 内存占用  | 验证内存占用合理无泄漏 | 中   |
| PERF-FL-001 | 首次加载  | 验证首次加载时间合理  | 中   |

---

## 11. 测试总结

### 11.1 测试执行概况

本次系统测试共设计了**23个**测试用例，涵盖功能测试、界面测试、性能测试三个主要类别。测试用例按照优先级分为高、中、低三个等级，其中功能测试用例11个，界面测试用例5个，性能测试用例3个。测试执行过程中需要详细记录每个用例的执行情况，为后续的缺陷修复和回归测试提供依据。

### 11.2 测试结果评估

通过对各模块功能的全面测试商城应用应具备以下核心能力：商品列表通过LazyForEach实现高效的懒加载渲染，确保在处理大量商品数据时保持良好的性能和用户体验；下拉刷新功能为用户提供直观的刷新交互体验，刷新过程有清晰的视觉反馈；触底加载功能实现了数据的分页加载，有效控制内存占用并提升首屏加载速度；分类标签页切换功能支持多分类商品的独立管理和展示，满足用户按类别浏览商品的需求。
